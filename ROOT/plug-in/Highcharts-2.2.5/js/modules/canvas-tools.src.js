function RGBColor(m){this.ok=false;if(m.charAt(0)=="#"){m=m.substr(1,6)}m=m.replace(/ /g,"");m=m.toLowerCase();var k={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};for(var q in k){if(m==q){m=k[q]}}var l=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}];for(var j=0;j<l.length;j++){var o=l[j].re;var p=l[j].process;var n=o.exec(m);if(n){channels=p(n);this.r=channels[0];this.g=channels[1];this.b=channels[2];this.ok=true}}this.r=(this.r<0||isNaN(this.r))?0:((this.r>255)?255:this.r);this.g=(this.g<0||isNaN(this.g))?0:((this.g>255)?255:this.g);this.b=(this.b<0||isNaN(this.b))?0:((this.b>255)?255:this.b);this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"};this.toHex=function(){var a=this.r.toString(16);var b=this.g.toString(16);var c=this.b.toString(16);if(a.length==1){a="0"+a}if(b.length==1){b="0"+b}if(c.length==1){c="0"+c}return"#"+a+b+c};this.getHelpXML=function(){var f=new Array();for(var d=0;d<l.length;d++){var g=l[d].example;for(var e=0;e<g.length;e++){f[f.length]=g[e]}}for(var w in k){f[f.length]=w}var c=document.createElement("ul");c.setAttribute("id","rgbcolor-examples");for(var d=0;d<f.length;d++){try{var b=document.createElement("li");var x=new RGBColor(f[d]);var v=document.createElement("div");v.style.cssText="margin: 3px; border: 1px solid black; background:"+x.toHex()+"; color:"+x.toHex();v.appendChild(document.createTextNode("test"));var h=document.createTextNode(" "+f[d]+" -> "+x.toRGB()+" -> "+x.toHex());b.appendChild(v);b.appendChild(h);c.appendChild(b)}catch(a){}}return c}}if(!window.console){window.console={};window.console.log=function(b){};window.console.dir=function(b){}}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(c){for(var d=0;d<this.length;d++){if(this[d]==c){return d}}return -1}}(function(){this.canvg=function(o,a,u){if(o==null&&a==null&&u==null){var s=document.getElementsByTagName("svg");for(var q=0;q<s.length;q++){var r=s[q];var n=document.createElement("canvas");n.width=r.clientWidth;n.height=r.clientHeight;r.parentNode.insertBefore(n,r);r.parentNode.removeChild(r);var t=document.createElement("div");t.appendChild(r);canvg(n,t.innerHTML)}return}u=u||{};if(typeof o=="string"){o=document.getElementById(o)}var p;if(o.svg==null){p=b();o.svg=p}else{p=o.svg;p.stop()}p.opts=u;var c=o.getContext("2d");if(typeof(a.documentElement)!="undefined"){p.loadXmlDoc(c,a)}else{if(a.substr(0,1)=="<"){p.loadXml(c,a)}else{p.load(c,a)}}};function b(){var a={};a.FRAMERATE=30;a.MAX_VIRTUAL_PIXELS=30000;a.init=function(d){a.Definitions={};a.Styles={};a.Animations=[];a.Images=[];a.ctx=d;a.ViewPort=new (function(){this.viewPorts=[];this.Clear=function(){this.viewPorts=[]};this.SetCurrent=function(c,f){this.viewPorts.push({width:c,height:f})};this.RemoveCurrent=function(){this.viewPorts.pop()};this.Current=function(){return this.viewPorts[this.viewPorts.length-1]};this.width=function(){return this.Current().width};this.height=function(){return this.Current().height};this.ComputeSize=function(c){if(c!=null&&typeof(c)=="number"){return c}if(c=="x"){return this.width()}if(c=="y"){return this.height()}return Math.sqrt(Math.pow(this.width(),2)+Math.pow(this.height(),2))/Math.sqrt(2)}})};a.init();a.ImagesLoaded=function(){for(var d=0;d<a.Images.length;d++){if(!a.Images[d].loaded){return false}}return true};a.trim=function(d){return d.replace(/^\s+|\s+$/g,"")};a.compressSpaces=function(d){return d.replace(/[\s\r\t\n]+/gm," ")};a.ajax=function(e){var f;if(window.XMLHttpRequest){f=new XMLHttpRequest()}else{f=new ActiveXObject("Microsoft.XMLHTTP")}if(f){f.open("GET",e,false);f.send(null);return f.responseText}return null};a.parseXml=function(h){if(window.DOMParser){var f=new DOMParser();return f.parseFromString(h,"text/xml")}else{h=h.replace(/<!DOCTYPE svg[^>]*>/,"");var g=new ActiveXObject("Microsoft.XMLDOM");g.async="false";g.loadXML(h);return g}};a.Property=function(h,f){this.name=h;this.value=f;this.hasValue=function(){return(this.value!=null&&this.value!=="")};this.numValue=function(){if(!this.hasValue()){return 0}var c=parseFloat(this.value);if((this.value+"").match(/%$/)){c=c/100}return c};this.valueOrDefault=function(c){if(this.hasValue()){return this.value}return c};this.numValueOrDefault=function(c){if(this.hasValue()){return this.numValue()}return c};var g=this;this.Color={addOpacity:function(d){var c=g.value;if(d!=null&&d!=""){var e=new RGBColor(g.value);if(e.ok){c="rgba("+e.r+", "+e.g+", "+e.b+", "+d+")"}}return new a.Property(g.name,c)}};this.Definition={getDefinition:function(){var c=g.value.replace(/^(url\()?#([^\)]+)\)?$/,"$2");return a.Definitions[c]},isUrl:function(){return g.value.indexOf("url(")==0},getFillStyle:function(c){var d=this.getDefinition();if(d!=null&&d.createGradient){return d.createGradient(a.ctx,c)}if(d!=null&&d.createPattern){return d.createPattern(a.ctx,c)}return null}};this.Length={DPI:function(c){return 96},EM:function(c){var e=12;var d=new a.Property("fontSize",a.Font.Parse(a.ctx.font).fontSize);if(d.hasValue()){e=d.Length.toPixels(c)}return e},toPixels:function(c){if(!g.hasValue()){return 0}var d=g.value+"";if(d.match(/em$/)){return g.numValue()*this.EM(c)}if(d.match(/ex$/)){return g.numValue()*this.EM(c)/2}if(d.match(/px$/)){return g.numValue()}if(d.match(/pt$/)){return g.numValue()*1.25}if(d.match(/pc$/)){return g.numValue()*15}if(d.match(/cm$/)){return g.numValue()*this.DPI(c)/2.54}if(d.match(/mm$/)){return g.numValue()*this.DPI(c)/25.4}if(d.match(/in$/)){return g.numValue()*this.DPI(c)}if(d.match(/%$/)){return g.numValue()*a.ViewPort.ComputeSize(c)}return g.numValue()}};this.Time={toMilliseconds:function(){if(!g.hasValue()){return 0}var c=g.value+"";if(c.match(/s$/)){return g.numValue()*1000}if(c.match(/ms$/)){return g.numValue()}return g.numValue()}};this.Angle={toRadians:function(){if(!g.hasValue()){return 0}var c=g.value+"";if(c.match(/deg$/)){return g.numValue()*(Math.PI/180)}if(c.match(/grad$/)){return g.numValue()*(Math.PI/200)}if(c.match(/rad$/)){return g.numValue()}return g.numValue()*(Math.PI/180)}}};a.Font=new (function(){this.Styles=["normal","italic","oblique","inherit"];this.Variants=["normal","small-caps","inherit"];this.Weights=["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900","inherit"];this.CreateFont=function(c,n,p,f,q,o){var m=o!=null?this.Parse(o):this.CreateFont("","","","","",a.ctx.font);return{fontFamily:q||m.fontFamily,fontSize:f||m.fontSize,fontStyle:c||m.fontStyle,fontWeight:p||m.fontWeight,fontVariant:n||m.fontVariant,toString:function(){return[this.fontStyle,this.fontVariant,this.fontWeight,this.fontSize,this.fontFamily].join(" ")}}};var d=this;this.Parse=function(n){var m={};var f=a.trim(a.compressSpaces(n||"")).split(" ");var c={fontSize:false,fontStyle:false,fontWeight:false,fontVariant:false};var p="";for(var o=0;o<f.length;o++){if(!c.fontStyle&&d.Styles.indexOf(f[o])!=-1){if(f[o]!="inherit"){m.fontStyle=f[o]}c.fontStyle=true}else{if(!c.fontVariant&&d.Variants.indexOf(f[o])!=-1){if(f[o]!="inherit"){m.fontVariant=f[o]}c.fontStyle=c.fontVariant=true}else{if(!c.fontWeight&&d.Weights.indexOf(f[o])!=-1){if(f[o]!="inherit"){m.fontWeight=f[o]}c.fontStyle=c.fontVariant=c.fontWeight=true}else{if(!c.fontSize){if(f[o]!="inherit"){m.fontSize=f[o].split("/")[0]}c.fontStyle=c.fontVariant=c.fontWeight=c.fontSize=true}else{if(f[o]!="inherit"){p+=f[o]}}}}}}if(p!=""){m.fontFamily=p}return m}});a.ToNumberArray=function(f){var h=a.trim(a.compressSpaces((f||"").replace(/,/g," "))).split(" ");for(var g=0;g<h.length;g++){h[g]=parseFloat(h[g])}return h};a.Point=function(f,e){this.x=f;this.y=e;this.angleTo=function(c){return Math.atan2(c.y-this.y,c.x-this.x)};this.applyTransform=function(h){var d=this.x*h[0]+this.y*h[2]+h[4];var c=this.x*h[1]+this.y*h[3]+h[5];this.x=d;this.y=c}};a.CreatePoint=function(e){var f=a.ToNumberArray(e);return new a.Point(f[0],f[1])};a.CreatePath=function(h){var k=a.ToNumberArray(h);var g=[];for(var j=0;j<k.length;j+=2){g.push(new a.Point(k[j],k[j+1]))}return g};a.BoundingBox=function(j,g,k,h){this.x1=Number.NaN;this.y1=Number.NaN;this.x2=Number.NaN;this.y2=Number.NaN;this.x=function(){return this.x1};this.y=function(){return this.y1};this.width=function(){return this.x2-this.x1};this.height=function(){return this.y2-this.y1};this.addPoint=function(d,c){if(d!=null){if(isNaN(this.x1)||isNaN(this.x2)){this.x1=d;this.x2=d}if(d<this.x1){this.x1=d}if(d>this.x2){this.x2=d}}if(c!=null){if(isNaN(this.y1)||isNaN(this.y2)){this.y1=c;this.y2=c}if(c<this.y1){this.y1=c}if(c>this.y2){this.y2=c}}};this.addX=function(c){this.addPoint(c,null)};this.addY=function(c){this.addPoint(null,c)};this.addBoundingBox=function(c){this.addPoint(c.x1,c.y1);this.addPoint(c.x2,c.y2)};this.addQuadraticCurve=function(r,s,v,w,e,f){var t=r+2/3*(v-r);var u=s+2/3*(w-s);var c=t+1/3*(e-r);var d=u+1/3*(f-s);this.addBezierCurve(r,s,t,c,u,d,e,f)};this.addBezierCurve=function(t,C,M,O,G,J,e,f){var L=[t,C],N=[M,O],P=[G,J],Q=[e,f];this.addPoint(L[0],L[1]);this.addPoint(Q[0],Q[1]);for(i=0;i<=1;i++){var d=function(l){return Math.pow(1-l,3)*L[i]+3*Math.pow(1-l,2)*l*N[i]+3*(1-l)*Math.pow(l,2)*P[i]+Math.pow(l,3)*Q[i]};var I=6*L[i]-12*N[i]+6*P[i];var F=-3*L[i]+9*N[i]-9*P[i]+3*Q[i];var c=3*N[i]-3*L[i];if(F==0){if(I==0){continue}var D=-c/I;if(0<D&&D<1){if(i==0){this.addX(d(D))}if(i==1){this.addY(d(D))}}continue}var K=Math.pow(I,2)-4*c*F;if(K<0){continue}var E=(-I+Math.sqrt(K))/(2*F);if(0<E&&E<1){if(i==0){this.addX(d(E))}if(i==1){this.addY(d(E))}}var H=(-I-Math.sqrt(K))/(2*F);if(0<H&&H<1){if(i==0){this.addX(d(H))}if(i==1){this.addY(d(H))}}}};this.isPointInBox=function(d,c){return(this.x1<=d&&d<=this.x2&&this.y1<=c&&c<=this.y2)};this.addPoint(j,g);this.addPoint(k,h)};a.Transform=function(q){var l=this;this.Type={};this.Type.translate=function(c){this.p=a.CreatePoint(c);this.apply=function(d){d.translate(this.p.x||0,this.p.y||0)};this.applyToPoint=function(d){d.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0])}};this.Type.rotate=function(c){var d=a.ToNumberArray(c);this.angle=new a.Property("angle",d[0]);this.cx=d[1]||0;this.cy=d[2]||0;this.apply=function(e){e.translate(this.cx,this.cy);e.rotate(this.angle.Angle.toRadians());e.translate(-this.cx,-this.cy)};this.applyToPoint=function(f){var e=this.angle.Angle.toRadians();f.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0]);f.applyTransform([Math.cos(e),Math.sin(e),-Math.sin(e),Math.cos(e),0,0]);f.applyTransform([1,0,0,1,-this.p.x||0,-this.p.y||0])}};this.Type.scale=function(c){this.p=a.CreatePoint(c);this.apply=function(d){d.scale(this.p.x||1,this.p.y||this.p.x||1)};this.applyToPoint=function(d){d.applyTransform([this.p.x||0,0,0,this.p.y||0,0,0])}};this.Type.matrix=function(c){this.m=a.ToNumberArray(c);this.apply=function(d){d.transform(this.m[0],this.m[1],this.m[2],this.m[3],this.m[4],this.m[5])};this.applyToPoint=function(d){d.applyTransform(this.m)}};this.Type.SkewBase=function(c){this.base=l.Type.matrix;this.base(c);this.angle=new a.Property("angle",c)};this.Type.SkewBase.prototype=new this.Type.matrix;this.Type.skewX=function(c){this.base=l.Type.SkewBase;this.base(c);this.m=[1,0,Math.tan(this.angle.Angle.toRadians()),1,0,0]};this.Type.skewX.prototype=new this.Type.SkewBase;this.Type.skewY=function(c){this.base=l.Type.SkewBase;this.base(c);this.m=[1,Math.tan(this.angle.Angle.toRadians()),0,1,0,0]};this.Type.skewY.prototype=new this.Type.SkewBase;this.transforms=[];this.apply=function(d){for(var c=0;c<this.transforms.length;c++){this.transforms[c].apply(d)}};this.applyToPoint=function(c){for(var d=0;d<this.transforms.length;d++){this.transforms[d].applyToPoint(c)}};var k=a.trim(a.compressSpaces(q)).split(/\s(?=[a-z])/);for(var o=0;o<k.length;o++){var m=k[o].split("(")[0];var n=k[o].split("(")[1].replace(")","");var p=new this.Type[m](n);this.transforms.push(p)}};a.AspectRatio=function(I,u,G,A,t,H,D,E,v,w){u=a.compressSpaces(u);u=u.replace(/^defer\s/,"");var B=u.split(" ")[0]||"xMidYMid";var F=u.split(" ")[1]||"meet";var x=G/A;var y=t/H;var C=Math.min(x,y);var z=Math.max(x,y);if(F=="meet"){A*=C;H*=C}if(F=="slice"){A*=z;H*=z}v=new a.Property("refX",v);w=new a.Property("refY",w);if(v.hasValue()&&w.hasValue()){I.translate(-C*v.Length.toPixels("x"),-C*w.Length.toPixels("y"))}else{if(B.match(/^xMid/)&&((F=="meet"&&C==y)||(F=="slice"&&z==y))){I.translate(G/2-A/2,0)}if(B.match(/YMid$/)&&((F=="meet"&&C==x)||(F=="slice"&&z==x))){I.translate(0,t/2-H/2)}if(B.match(/^xMax/)&&((F=="meet"&&C==y)||(F=="slice"&&z==y))){I.translate(G-A,0)}if(B.match(/YMax$/)&&((F=="meet"&&C==x)||(F=="slice"&&z==x))){I.translate(0,t-H)}}if(B=="none"){I.scale(x,y)}else{if(F=="meet"){I.scale(C,C)}else{if(F=="slice"){I.scale(z,z)}}}I.translate(D==null?0:-D,E==null?0:-E)};a.Element={};a.Element.ElementBase=function(s){this.attributes={};this.styles={};this.children=[];this.attribute=function(e,d){var c=this.attributes[e];if(c!=null){return c}c=new a.Property(e,"");if(d==true){this.attributes[e]=c}return c};this.style=function(h,d){var g=this.styles[h];if(g!=null){return g}var c=this.attribute(h);if(c!=null&&c.hasValue()){return c}var f=this.parent;if(f!=null){var e=f.style(h);if(e!=null&&e.hasValue()){return e}}g=new a.Property(h,"");if(d==true){this.styles[h]=g}return g};this.render=function(e){if(this.style("display").value=="none"){return}if(this.attribute("visibility").value=="hidden"){return}e.save();this.setContext(e);if(this.attribute("mask").hasValue()){var c=this.attribute("mask").Definition.getDefinition();if(c!=null){c.apply(e,this)}}else{if(this.style("filter").hasValue()){var d=this.style("filter").Definition.getDefinition();if(d!=null){d.apply(e,this)}}else{this.renderChildren(e)}}this.clearContext(e);e.restore()};this.setContext=function(c){};this.clearContext=function(c){};this.renderChildren=function(c){for(var d=0;d<this.children.length;d++){this.children[d].render(c)}};this.addChild=function(e,c){var d=e;if(c){d=a.CreateElement(e)}d.parent=this;this.children.push(d)};if(s!=null&&s.nodeType==1){for(var p=0;p<s.childNodes.length;p++){var w=s.childNodes[p];if(w.nodeType==1){this.addChild(w,true)}}for(var p=0;p<s.attributes.length;p++){var t=s.attributes[p];this.attributes[t.nodeName]=new a.Property(t.nodeName,t.nodeValue)}var j=a.Styles[s.nodeName];if(j!=null){for(var u in j){this.styles[u]=j[u]}}if(this.attribute("class").hasValue()){var r=a.compressSpaces(this.attribute("class").value).split(" ");for(var q=0;q<r.length;q++){j=a.Styles["."+r[q]];if(j!=null){for(var u in j){this.styles[u]=j[u]}}j=a.Styles[s.nodeName+"."+r[q]];if(j!=null){for(var u in j){this.styles[u]=j[u]}}}}if(this.attribute("style").hasValue()){var j=this.attribute("style").value.split(";");for(var p=0;p<j.length;p++){if(a.trim(j[p])!=""){var v=j[p].split(":");var u=a.trim(v[0]);var o=a.trim(v[1]);this.styles[u]=new a.Property(u,o)}}}if(this.attribute("id").hasValue()){if(a.Definitions[this.attribute("id").value]==null){a.Definitions[this.attribute("id").value]=this}}}};a.Element.RenderedElementBase=function(d){this.base=a.Element.ElementBase;this.base(d);this.setContext=function(n){if(this.style("fill").Definition.isUrl()){var o=this.style("fill").Definition.getFillStyle(this);if(o!=null){n.fillStyle=o}}else{if(this.style("fill").hasValue()){var m=this.style("fill");if(this.style("fill-opacity").hasValue()){m=m.Color.addOpacity(this.style("fill-opacity").value)}n.fillStyle=(m.value=="none"?"rgba(0,0,0,0)":m.value)}}if(this.style("stroke").Definition.isUrl()){var o=this.style("stroke").Definition.getFillStyle(this);if(o!=null){n.strokeStyle=o}}else{if(this.style("stroke").hasValue()){var c=this.style("stroke");if(this.style("stroke-opacity").hasValue()){c=c.Color.addOpacity(this.style("stroke-opacity").value)}n.strokeStyle=(c.value=="none"?"rgba(0,0,0,0)":c.value)}}if(this.style("stroke-width").hasValue()){n.lineWidth=this.style("stroke-width").Length.toPixels()}if(this.style("stroke-linecap").hasValue()){n.lineCap=this.style("stroke-linecap").value}if(this.style("stroke-linejoin").hasValue()){n.lineJoin=this.style("stroke-linejoin").value}if(this.style("stroke-miterlimit").hasValue()){n.miterLimit=this.style("stroke-miterlimit").value}if(typeof(n.font)!="undefined"){n.font=a.Font.CreateFont(this.style("font-style").value,this.style("font-variant").value,this.style("font-weight").value,this.style("font-size").hasValue()?this.style("font-size").Length.toPixels()+"px":"",this.style("font-family").value).toString()}if(this.attribute("transform").hasValue()){var l=new a.Transform(this.attribute("transform").value);l.apply(n)}if(this.attribute("clip-path").hasValue()){var k=this.attribute("clip-path").Definition.getDefinition();if(k!=null){k.apply(n)}}if(this.style("opacity").hasValue()){n.globalAlpha=this.style("opacity").numValue()}}};a.Element.RenderedElementBase.prototype=new a.Element.ElementBase;a.Element.PathElementBase=function(d){this.base=a.Element.RenderedElementBase;this.base(d);this.path=function(c){if(c!=null){c.beginPath()}return new a.BoundingBox()};this.renderChildren=function(j){this.path(j);a.Mouse.checkPath(this,j);if(j.fillStyle!=""){j.fill()}if(j.strokeStyle!=""){j.stroke()}var c=this.getMarkers();if(c!=null){if(this.style("marker-start").Definition.isUrl()){var k=this.style("marker-start").Definition.getDefinition();k.render(j,c[0][0],c[0][1])}if(this.style("marker-mid").Definition.isUrl()){var k=this.style("marker-mid").Definition.getDefinition();for(var h=1;h<c.length-1;h++){k.render(j,c[h][0],c[h][1])}}if(this.style("marker-end").Definition.isUrl()){var k=this.style("marker-end").Definition.getDefinition();k.render(j,c[c.length-1][0],c[c.length-1][1])}}};this.getBoundingBox=function(){return this.path()};this.getMarkers=function(){return null}};a.Element.PathElementBase.prototype=new a.Element.RenderedElementBase;a.Element.svg=function(d){this.base=a.Element.RenderedElementBase;this.base(d);this.baseClearContext=this.clearContext;this.clearContext=function(c){this.baseClearContext(c);a.ViewPort.RemoveCurrent()};this.baseSetContext=this.setContext;this.setContext=function(p){p.strokeStyle="rgba(0,0,0,0)";p.lineCap="butt";p.lineJoin="miter";p.miterLimit=4;this.baseSetContext(p);if(this.attribute("x").hasValue()&&this.attribute("y").hasValue()){p.translate(this.attribute("x").Length.toPixels("x"),this.attribute("y").Length.toPixels("y"))}var o=a.ViewPort.width();var q=a.ViewPort.height();if(typeof(this.root)=="undefined"&&this.attribute("width").hasValue()&&this.attribute("height").hasValue()){o=this.attribute("width").Length.toPixels("x");q=this.attribute("height").Length.toPixels("y");var r=0;var c=0;if(this.attribute("refX").hasValue()&&this.attribute("refY").hasValue()){r=-this.attribute("refX").Length.toPixels("x");c=-this.attribute("refY").Length.toPixels("y")}p.beginPath();p.moveTo(r,c);p.lineTo(o,c);p.lineTo(o,q);p.lineTo(r,q);p.closePath();p.clip()}a.ViewPort.SetCurrent(o,q);if(this.attribute("viewBox").hasValue()){var n=a.ToNumberArray(this.attribute("viewBox").value);var s=n[0];var m=n[1];o=n[2];q=n[3];a.AspectRatio(p,this.attribute("preserveAspectRatio").value,a.ViewPort.width(),o,a.ViewPort.height(),q,s,m,this.attribute("refX").value,this.attribute("refY").value);a.ViewPort.RemoveCurrent();a.ViewPort.SetCurrent(n[2],n[3])}}};a.Element.svg.prototype=new a.Element.RenderedElementBase;a.Element.rect=function(d){this.base=a.Element.PathElementBase;this.base(d);this.path=function(o){var p=this.attribute("x").Length.toPixels("x");var c=this.attribute("y").Length.toPixels("y");var n=this.attribute("width").Length.toPixels("x");var q=this.attribute("height").Length.toPixels("y");var l=this.attribute("rx").Length.toPixels("x");var m=this.attribute("ry").Length.toPixels("y");if(this.attribute("rx").hasValue()&&!this.attribute("ry").hasValue()){m=l}if(this.attribute("ry").hasValue()&&!this.attribute("rx").hasValue()){l=m}if(o!=null){o.beginPath();o.moveTo(p+l,c);o.lineTo(p+n-l,c);o.quadraticCurveTo(p+n,c,p+n,c+m);o.lineTo(p+n,c+q-m);o.quadraticCurveTo(p+n,c+q,p+n-l,c+q);o.lineTo(p+l,c+q);o.quadraticCurveTo(p,c+q,p,c+q-m);o.lineTo(p,c+m);o.quadraticCurveTo(p,c,p+l,c);o.closePath()}return new a.BoundingBox(p,c,p+n,c+q)}};a.Element.rect.prototype=new a.Element.PathElementBase;a.Element.circle=function(d){this.base=a.Element.PathElementBase;this.base(d);this.path=function(j){var k=this.attribute("cx").Length.toPixels("x");var c=this.attribute("cy").Length.toPixels("y");var h=this.attribute("r").Length.toPixels();if(j!=null){j.beginPath();j.arc(k,c,h,0,Math.PI*2,true);j.closePath()}return new a.BoundingBox(k-h,c-h,k+h,c+h)}};a.Element.circle.prototype=new a.Element.PathElementBase;a.Element.ellipse=function(d){this.base=a.Element.PathElementBase;this.base(d);this.path=function(n){var l=4*((Math.sqrt(2)-1)/3);var k=this.attribute("rx").Length.toPixels("x");var m=this.attribute("ry").Length.toPixels("y");var o=this.attribute("cx").Length.toPixels("x");var c=this.attribute("cy").Length.toPixels("y");if(n!=null){n.beginPath();n.moveTo(o,c-m);n.bezierCurveTo(o+(l*k),c-m,o+k,c-(l*m),o+k,c);n.bezierCurveTo(o+k,c+(l*m),o+(l*k),c+m,o,c+m);n.bezierCurveTo(o-(l*k),c+m,o-k,c+(l*m),o-k,c);n.bezierCurveTo(o-k,c-(l*m),o-(l*k),c-m,o,c-m);n.closePath()}return new a.BoundingBox(o-k,c-m,o+k,c+m)}};a.Element.ellipse.prototype=new a.Element.PathElementBase;a.Element.line=function(d){this.base=a.Element.PathElementBase;this.base(d);this.getPoints=function(){return[new a.Point(this.attribute("x1").Length.toPixels("x"),this.attribute("y1").Length.toPixels("y")),new a.Point(this.attribute("x2").Length.toPixels("x"),this.attribute("y2").Length.toPixels("y"))]};this.path=function(f){var c=this.getPoints();if(f!=null){f.beginPath();f.moveTo(c[0].x,c[0].y);f.lineTo(c[1].x,c[1].y)}return new a.BoundingBox(c[0].x,c[0].y,c[1].x,c[1].y)};this.getMarkers=function(){var c=this.getPoints();var f=c[0].angleTo(c[1]);return[[c[0],f],[c[1],f]]}};a.Element.line.prototype=new a.Element.PathElementBase;a.Element.polyline=function(d){this.base=a.Element.PathElementBase;this.base(d);this.points=a.CreatePath(this.attribute("points").value);this.path=function(h){var c=new a.BoundingBox(this.points[0].x,this.points[0].y);if(h!=null){h.beginPath();h.moveTo(this.points[0].x,this.points[0].y)}for(var g=1;g<this.points.length;g++){c.addPoint(this.points[g].x,this.points[g].y);if(h!=null){h.lineTo(this.points[g].x,this.points[g].y)}}return c};this.getMarkers=function(){var c=[];for(var f=0;f<this.points.length-1;f++){c.push([this.points[f],this.points[f].angleTo(this.points[f+1])])}c.push([this.points[this.points.length-1],c[c.length-1][1]]);return c}};a.Element.polyline.prototype=new a.Element.PathElementBase;a.Element.polygon=function(d){this.base=a.Element.polyline;this.base(d);this.basePath=this.path;this.path=function(f){var c=this.basePath(f);if(f!=null){f.lineTo(this.points[0].x,this.points[0].y);f.closePath()}return c}};a.Element.polygon.prototype=new a.Element.polyline;a.Element.path=function(f){this.base=a.Element.PathElementBase;this.base(f);var d=this.attribute("d").value;d=d.replace(/,/gm," ");d=d.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2");d=d.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2");d=d.replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2");d=d.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2");d=d.replace(/([0-9])([+\-])/gm,"$1 $2");d=d.replace(/(\.[0-9]*)(\.)/gm,"$1 $2");d=d.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 ");d=a.compressSpaces(d);d=a.trim(d);this.PathParser=new (function(c){this.tokens=c.split(" ");this.reset=function(){this.i=-1;this.command="";this.previousCommand="";this.start=new a.Point(0,0);this.control=new a.Point(0,0);this.current=new a.Point(0,0);this.points=[];this.angles=[]};this.isEnd=function(){return this.i>=this.tokens.length-1};this.isCommandOrEnd=function(){if(this.isEnd()){return true}return this.tokens[this.i+1].match(/^[A-Za-z]$/)!=null};this.isRelativeCommand=function(){return this.command==this.command.toLowerCase()};this.getToken=function(){this.i=this.i+1;return this.tokens[this.i]};this.getScalar=function(){return parseFloat(this.getToken())};this.nextCommand=function(){this.previousCommand=this.command;this.command=this.getToken()};this.getPoint=function(){var e=new a.Point(this.getScalar(),this.getScalar());return this.makeAbsolute(e)};this.getAsControlPoint=function(){var e=this.getPoint();this.control=e;return e};this.getAsCurrentPoint=function(){var e=this.getPoint();this.current=e;return e};this.getReflectedControlPoint=function(){if(this.previousCommand.toLowerCase()!="c"&&this.previousCommand.toLowerCase()!="s"){return this.current}var e=new a.Point(2*this.current.x-this.control.x,2*this.current.y-this.control.y);return e};this.makeAbsolute=function(e){if(this.isRelativeCommand()){e.x=this.current.x+e.x;e.y=this.current.y+e.y}return e};this.addMarker=function(j,e,k){if(k!=null&&this.angles.length>0&&this.angles[this.angles.length-1]==null){this.angles[this.angles.length-1]=this.points[this.points.length-1].angleTo(k)}this.addMarkerAngle(j,e==null?null:e.angleTo(j))};this.addMarkerAngle=function(e,h){this.points.push(e);this.angles.push(h)};this.getMarkerPoints=function(){return this.points};this.getMarkerAngles=function(){for(var e=0;e<this.angles.length;e++){if(this.angles[e]==null){for(var h=e+1;h<this.angles.length;h++){if(this.angles[h]!=null){this.angles[e]=this.angles[h];break}}}}return this.angles}})(d);this.path=function(S){var v=this.PathParser;v.reset();var X=new a.BoundingBox();if(S!=null){S.beginPath()}while(!v.isEnd()){v.nextCommand();switch(v.command.toUpperCase()){case"M":var V=v.getAsCurrentPoint();v.addMarker(V);X.addPoint(V.x,V.y);if(S!=null){S.moveTo(V.x,V.y)}v.start=v.current;while(!v.isCommandOrEnd()){var V=v.getAsCurrentPoint();v.addMarker(V,v.start);X.addPoint(V.x,V.y);if(S!=null){S.lineTo(V.x,V.y)}}break;case"L":while(!v.isCommandOrEnd()){var m=v.current;var V=v.getAsCurrentPoint();v.addMarker(V,m);X.addPoint(V.x,V.y);if(S!=null){S.lineTo(V.x,V.y)}}break;case"H":while(!v.isCommandOrEnd()){var ai=new a.Point((v.isRelativeCommand()?v.current.x:0)+v.getScalar(),v.current.y);v.addMarker(ai,v.current);v.current=ai;X.addPoint(v.current.x,v.current.y);if(S!=null){S.lineTo(v.current.x,v.current.y)}}break;case"V":while(!v.isCommandOrEnd()){var ai=new a.Point(v.current.x,(v.isRelativeCommand()?v.current.y:0)+v.getScalar());v.addMarker(ai,v.current);v.current=ai;X.addPoint(v.current.x,v.current.y);if(S!=null){S.lineTo(v.current.x,v.current.y)}}break;case"C":while(!v.isCommandOrEnd()){var s=v.current;var ag=v.getPoint();var af=v.getAsControlPoint();var R=v.getAsCurrentPoint();v.addMarker(R,af,ag);X.addBezierCurve(s.x,s.y,ag.x,ag.y,af.x,af.y,R.x,R.y);if(S!=null){S.bezierCurveTo(ag.x,ag.y,af.x,af.y,R.x,R.y)}}break;case"S":while(!v.isCommandOrEnd()){var s=v.current;var ag=v.getReflectedControlPoint();var af=v.getAsControlPoint();var R=v.getAsCurrentPoint();v.addMarker(R,af,ag);X.addBezierCurve(s.x,s.y,ag.x,ag.y,af.x,af.y,R.x,R.y);if(S!=null){S.bezierCurveTo(ag.x,ag.y,af.x,af.y,R.x,R.y)}}break;case"Q":while(!v.isCommandOrEnd()){var s=v.current;var af=v.getAsControlPoint();var R=v.getAsCurrentPoint();v.addMarker(R,af,af);X.addQuadraticCurve(s.x,s.y,af.x,af.y,R.x,R.y);if(S!=null){S.quadraticCurveTo(af.x,af.y,R.x,R.y)}}break;case"T":while(!v.isCommandOrEnd()){var s=v.current;var af=v.getReflectedControlPoint();v.control=af;var R=v.getAsCurrentPoint();v.addMarker(R,af,af);X.addQuadraticCurve(s.x,s.y,af.x,af.y,R.x,R.y);if(S!=null){S.quadraticCurveTo(af.x,af.y,R.x,R.y)}}break;case"A":while(!v.isCommandOrEnd()){var s=v.current;var ab=v.getScalar();var ad=v.getScalar();var aj=v.getScalar()*(Math.PI/180);var T=v.getScalar();var ae=v.getScalar();var R=v.getAsCurrentPoint();var c=new a.Point(Math.cos(aj)*(s.x-R.x)/2+Math.sin(aj)*(s.y-R.y)/2,-Math.sin(aj)*(s.x-R.x)/2+Math.cos(aj)*(s.y-R.y)/2);var Q=Math.pow(c.x,2)/Math.pow(ab,2)+Math.pow(c.y,2)/Math.pow(ad,2);if(Q>1){ab*=Math.sqrt(Q);ad*=Math.sqrt(Q)}var aa=(T==ae?-1:1)*Math.sqrt(((Math.pow(ab,2)*Math.pow(ad,2))-(Math.pow(ab,2)*Math.pow(c.y,2))-(Math.pow(ad,2)*Math.pow(c.x,2)))/(Math.pow(ab,2)*Math.pow(c.y,2)+Math.pow(ad,2)*Math.pow(c.x,2)));if(isNaN(aa)){aa=0}var ac=new a.Point(aa*ab*c.y/ad,aa*-ad*c.x/ab);var ah=new a.Point((s.x+R.x)/2+Math.cos(aj)*ac.x-Math.sin(aj)*ac.y,(s.y+R.y)/2+Math.sin(aj)*ac.x+Math.cos(aj)*ac.y);var U=function(g){return Math.sqrt(Math.pow(g[0],2)+Math.pow(g[1],2))};var Y=function(g,h){return(g[0]*h[0]+g[1]*h[1])/(U(g)*U(h))};var l=function(g,h){return(g[0]*h[1]<g[1]*h[0]?-1:1)*Math.acos(Y(g,h))};var e=l([1,0],[(c.x-ac.x)/ab,(c.y-ac.y)/ad]);var r=[(c.x-ac.x)/ab,(c.y-ac.y)/ad];var u=[(-c.x-ac.x)/ab,(-c.y-ac.y)/ad];var p=l(r,u);if(Y(r,u)<=-1){p=Math.PI}if(Y(r,u)>=1){p=0}if(ae==0&&p>0){p=p-2*Math.PI}if(ae==1&&p<0){p=p+2*Math.PI}var ak=new a.Point(ah.x-ab*Math.cos((e+p)/2),ah.y-ad*Math.sin((e+p)/2));v.addMarkerAngle(ak,(e+p)/2+(ae==0?1:-1)*Math.PI/2);v.addMarkerAngle(R,p+(ae==0?1:-1)*Math.PI/2);X.addPoint(R.x,R.y);if(S!=null){var Y=ab>ad?ab:ad;var W=ab>ad?1:ab/ad;var Z=ab>ad?ad/ab:1;S.translate(ah.x,ah.y);S.rotate(aj);S.scale(W,Z);S.arc(0,0,Y,e,e+p,1-ae);S.scale(1/W,1/Z);S.rotate(-aj);S.translate(-ah.x,-ah.y)}}break;case"Z":if(S!=null){S.closePath()}v.current=v.start}}return X};this.getMarkers=function(){var j=this.PathParser.getMarkerPoints();var c=this.PathParser.getMarkerAngles();var e=[];for(var k=0;k<j.length;k++){e.push([j[k],c[k]])}return e}};a.Element.path.prototype=new a.Element.PathElementBase;a.Element.pattern=function(d){this.base=a.Element.ElementBase;this.base(d);this.createPattern=function(k,j){var h=new a.Element.svg();h.attributes.viewBox=new a.Property("viewBox",this.attribute("viewBox").value);h.attributes.x=new a.Property("x",this.attribute("x").value);h.attributes.y=new a.Property("y",this.attribute("y").value);h.attributes.width=new a.Property("width",this.attribute("width").value);h.attributes.height=new a.Property("height",this.attribute("height").value);h.children=this.children;var c=document.createElement("canvas");c.width=this.attribute("width").Length.toPixels("x");c.height=this.attribute("height").Length.toPixels("y");h.render(c.getContext("2d"));return k.createPattern(c,"repeat")}};a.Element.pattern.prototype=new a.Element.ElementBase;a.Element.marker=function(d){this.base=a.Element.ElementBase;this.base(d);this.baseRender=this.render;this.render=function(j,k,c){j.translate(k.x,k.y);if(this.attribute("orient").valueOrDefault("auto")=="auto"){j.rotate(c)}if(this.attribute("markerUnits").valueOrDefault("strokeWidth")=="strokeWidth"){j.scale(j.lineWidth,j.lineWidth)}j.save();var h=new a.Element.svg();h.attributes.viewBox=new a.Property("viewBox",this.attribute("viewBox").value);h.attributes.refX=new a.Property("refX",this.attribute("refX").value);h.attributes.refY=new a.Property("refY",this.attribute("refY").value);h.attributes.width=new a.Property("width",this.attribute("markerWidth").value);h.attributes.height=new a.Property("height",this.attribute("markerHeight").value);h.attributes.fill=new a.Property("fill",this.attribute("fill").valueOrDefault("black"));h.attributes.stroke=new a.Property("stroke",this.attribute("stroke").valueOrDefault("none"));h.children=this.children;h.render(j);j.restore();if(this.attribute("markerUnits").valueOrDefault("strokeWidth")=="strokeWidth"){j.scale(1/j.lineWidth,1/j.lineWidth)}if(this.attribute("orient").valueOrDefault("auto")=="auto"){j.rotate(-c)}j.translate(-k.x,-k.y)}};a.Element.marker.prototype=new a.Element.ElementBase;a.Element.defs=function(d){this.base=a.Element.ElementBase;this.base(d);this.render=function(c){}};a.Element.defs.prototype=new a.Element.ElementBase;a.Element.GradientBase=function(g){this.base=a.Element.ElementBase;this.base(g);this.gradientUnits=this.attribute("gradientUnits").valueOrDefault("objectBoundingBox");this.stops=[];for(var h=0;h<this.children.length;h++){var f=this.children[h];this.stops.push(f)}this.getGradient=function(){};this.createGradient=function(c,y){var d=this;if(this.attribute("xlink:href").hasValue()){d=this.attribute("xlink:href").Definition.getDefinition()}var w=this.getGradient(c,y);for(var x=0;x<d.stops.length;x++){w.addColorStop(d.stops[x].offset,d.stops[x].color)}if(this.attribute("gradientTransform").hasValue()){var u=a.ViewPort.viewPorts[0];var t=new a.Element.rect();t.attributes.x=new a.Property("x",-a.MAX_VIRTUAL_PIXELS/3);t.attributes.y=new a.Property("y",-a.MAX_VIRTUAL_PIXELS/3);t.attributes.width=new a.Property("width",a.MAX_VIRTUAL_PIXELS);t.attributes.height=new a.Property("height",a.MAX_VIRTUAL_PIXELS);var e=new a.Element.g();e.attributes.transform=new a.Property("transform",this.attribute("gradientTransform").value);e.children=[t];var s=new a.Element.svg();s.attributes.x=new a.Property("x",0);s.attributes.y=new a.Property("y",0);s.attributes.width=new a.Property("width",u.width);s.attributes.height=new a.Property("height",u.height);s.children=[e];var v=document.createElement("canvas");v.width=u.width;v.height=u.height;var z=v.getContext("2d");z.fillStyle=w;s.render(z);return z.createPattern(v,"no-repeat")}return w}};a.Element.GradientBase.prototype=new a.Element.ElementBase;a.Element.linearGradient=function(d){this.base=a.Element.GradientBase;this.base(d);this.getGradient=function(q,m){var c=m.getBoundingBox();var o=(this.gradientUnits=="objectBoundingBox"?c.x()+c.width()*this.attribute("x1").numValue():this.attribute("x1").Length.toPixels("x"));var l=(this.gradientUnits=="objectBoundingBox"?c.y()+c.height()*this.attribute("y1").numValue():this.attribute("y1").Length.toPixels("y"));var p=(this.gradientUnits=="objectBoundingBox"?c.x()+c.width()*this.attribute("x2").numValue():this.attribute("x2").Length.toPixels("x"));var n=(this.gradientUnits=="objectBoundingBox"?c.y()+c.height()*this.attribute("y2").numValue():this.attribute("y2").Length.toPixels("y"));return q.createLinearGradient(o,l,p,n)}};a.Element.linearGradient.prototype=new a.Element.GradientBase;a.Element.radialGradient=function(d){this.base=a.Element.GradientBase;this.base(d);this.getGradient=function(r,q){var m=q.getBoundingBox();var s=(this.gradientUnits=="objectBoundingBox"?m.x()+m.width()*this.attribute("cx").numValue():this.attribute("cx").Length.toPixels("x"));var c=(this.gradientUnits=="objectBoundingBox"?m.y()+m.height()*this.attribute("cy").numValue():this.attribute("cy").Length.toPixels("y"));var n=s;var p=c;if(this.attribute("fx").hasValue()){n=(this.gradientUnits=="objectBoundingBox"?m.x()+m.width()*this.attribute("fx").numValue():this.attribute("fx").Length.toPixels("x"))}if(this.attribute("fy").hasValue()){p=(this.gradientUnits=="objectBoundingBox"?m.y()+m.height()*this.attribute("fy").numValue():this.attribute("fy").Length.toPixels("y"))}var o=(this.gradientUnits=="objectBoundingBox"?(m.width()+m.height())/2*this.attribute("r").numValue():this.attribute("r").Length.toPixels());return r.createRadialGradient(n,p,0,s,c,o)}};a.Element.radialGradient.prototype=new a.Element.GradientBase;a.Element.stop=function(e){this.base=a.Element.ElementBase;this.base(e);this.offset=this.attribute("offset").numValue();var f=this.style("stop-color");if(this.style("stop-opacity").hasValue()){f=f.Color.addOpacity(this.style("stop-opacity").value)}this.color=f.value};a.Element.stop.prototype=new a.Element.ElementBase;a.Element.AnimateBase=function(d){this.base=a.Element.ElementBase;this.base(d);a.Animations.push(this);this.duration=0;this.begin=this.attribute("begin").Time.toMilliseconds();this.maxDuration=this.begin+this.attribute("dur").Time.toMilliseconds();this.getProperty=function(){var c=this.attribute("attributeType").value;var f=this.attribute("attributeName").value;if(c=="CSS"){return this.parent.style(f,true)}return this.parent.attribute(f,true)};this.initialValue=null;this.removed=false;this.calcValue=function(){return""};this.update=function(c){if(this.initialValue==null){this.initialValue=this.getProperty().value}if(this.duration>this.maxDuration){if(this.attribute("repeatCount").value=="indefinite"){this.duration=0}else{if(this.attribute("fill").valueOrDefault("remove")=="remove"&&!this.removed){this.removed=true;this.getProperty().value=this.initialValue;return true}else{return false}}}this.duration=this.duration+c;var k=false;if(this.begin<this.duration){var h=this.calcValue();if(this.attribute("type").hasValue()){var j=this.attribute("type").value;h=j+"("+h+")"}this.getProperty().value=h;k=true}return k};this.progress=function(){return((this.duration-this.begin)/(this.maxDuration-this.begin))}};a.Element.AnimateBase.prototype=new a.Element.ElementBase;a.Element.animate=function(d){this.base=a.Element.AnimateBase;this.base(d);this.calcValue=function(){var c=this.attribute("from").numValue();var f=this.attribute("to").numValue();return c+(f-c)*this.progress()}};a.Element.animate.prototype=new a.Element.AnimateBase;a.Element.animateColor=function(d){this.base=a.Element.AnimateBase;this.base(d);this.calcValue=function(){var c=new RGBColor(this.attribute("from").value);var g=new RGBColor(this.attribute("to").value);if(c.ok&&g.ok){var k=c.r+(g.r-c.r)*this.progress();var l=c.g+(g.g-c.g)*this.progress();var m=c.b+(g.b-c.b)*this.progress();return"rgb("+parseInt(k,10)+","+parseInt(l,10)+","+parseInt(m,10)+")"}return this.attribute("from").value}};a.Element.animateColor.prototype=new a.Element.AnimateBase;a.Element.animateTransform=function(d){this.base=a.Element.animate;this.base(d)};a.Element.animateTransform.prototype=new a.Element.animate;a.Element.font=function(g){this.base=a.Element.ElementBase;this.base(g);this.horizAdvX=this.attribute("horiz-adv-x").numValue();this.isRTL=false;this.isArabic=false;this.fontFace=null;this.missingGlyph=null;this.glyphs=[];for(var h=0;h<this.children.length;h++){var f=this.children[h];if(f.type=="font-face"){this.fontFace=f;if(f.style("font-family").hasValue()){a.Definitions[f.style("font-family").value]=this}}else{if(f.type=="missing-glyph"){this.missingGlyph=f}else{if(f.type=="glyph"){if(f.arabicForm!=""){this.isRTL=true;this.isArabic=true;if(typeof(this.glyphs[f.unicode])=="undefined"){this.glyphs[f.unicode]=[]}this.glyphs[f.unicode][f.arabicForm]=f}else{this.glyphs[f.unicode]=f}}}}}};a.Element.font.prototype=new a.Element.ElementBase;a.Element.fontface=function(d){this.base=a.Element.ElementBase;this.base(d);this.ascent=this.attribute("ascent").value;this.descent=this.attribute("descent").value;this.unitsPerEm=this.attribute("units-per-em").numValue()};a.Element.fontface.prototype=new a.Element.ElementBase;a.Element.missingglyph=function(d){this.base=a.Element.path;this.base(d);this.horizAdvX=0};a.Element.missingglyph.prototype=new a.Element.path;a.Element.glyph=function(d){this.base=a.Element.path;this.base(d);this.horizAdvX=this.attribute("horiz-adv-x").numValue();this.unicode=this.attribute("unicode").value;this.arabicForm=this.attribute("arabic-form").value};a.Element.glyph.prototype=new a.Element.path;a.Element.text=function(f){this.base=a.Element.RenderedElementBase;this.base(f);if(f!=null){this.children=[];for(var g=0;g<f.childNodes.length;g++){var h=f.childNodes[g];if(h.nodeType==1){this.addChild(h,true)}else{if(h.nodeType==3){this.addChild(new a.Element.tspan(h),false)}}}}this.baseSetContext=this.setContext;this.setContext=function(c){this.baseSetContext(c);if(this.style("dominant-baseline").hasValue()){c.textBaseline=this.style("dominant-baseline").value}if(this.style("alignment-baseline").hasValue()){c.textBaseline=this.style("alignment-baseline").value}};this.renderChildren=function(c){var u=this.style("text-anchor").valueOrDefault("start");var d=this.attribute("x").Length.toPixels("x");var e=this.attribute("y").Length.toPixels("y");for(var r=0;r<this.children.length;r++){var v=this.children[r];if(v.attribute("x").hasValue()){v.x=v.attribute("x").Length.toPixels("x")}else{if(v.attribute("dx").hasValue()){d+=v.attribute("dx").Length.toPixels("x")}v.x=d}var j=v.measureText(c);if(u!="start"&&(r==0||v.attribute("x").hasValue())){var w=j;for(var s=r+1;s<this.children.length;s++){var t=this.children[s];if(t.attribute("x").hasValue()){break}w+=t.measureText(c)}v.x-=(u=="end"?w:w/2)}d=v.x+j;if(v.attribute("y").hasValue()){v.y=v.attribute("y").Length.toPixels("y")}else{if(v.attribute("dy").hasValue()){e+=v.attribute("dy").Length.toPixels("y")}v.y=e}e=v.y;v.render(c)}}};a.Element.text.prototype=new a.Element.RenderedElementBase;a.Element.TextElementBase=function(d){this.base=a.Element.RenderedElementBase;this.base(d);this.getGlyph=function(o,k,n){var c=k[n];var m=null;if(o.isArabic){var l="isolated";if((n==0||k[n-1]==" ")&&n<k.length-2&&k[n+1]!=" "){l="terminal"}if(n>0&&k[n-1]!=" "&&n<k.length-2&&k[n+1]!=" "){l="medial"}if(n>0&&k[n-1]!=" "&&(n==k.length-1||k[n+1]==" ")){l="initial"}if(typeof(o.glyphs[c])!="undefined"){m=o.glyphs[c][l];if(m==null&&o.glyphs[c].type=="glyph"){m=o.glyphs[c]}}}else{m=o.glyphs[c]}if(m==null){m=o.missingGlyph}return m};this.renderChildren=function(p){var r=this.parent.style("font-family").Definition.getDefinition();if(r!=null){var o=this.parent.style("font-size").numValueOrDefault(a.Font.Parse(a.ctx.font).fontSize);var u=this.parent.style("font-style").valueOrDefault(a.Font.Parse(a.ctx.font).fontStyle);var q=this.getText();if(r.isRTL){q=q.split("").reverse().join("")}var c=a.ToNumberArray(this.parent.attribute("dx").value);for(var t=0;t<q.length;t++){var s=this.getGlyph(r,q,t);var v=o/r.fontFace.unitsPerEm;p.translate(this.x,this.y);p.scale(v,-v);var w=p.lineWidth;p.lineWidth=p.lineWidth*r.fontFace.unitsPerEm/o;if(u=="italic"){p.transform(1,0,0.4,1,0,0)}s.render(p);if(u=="italic"){p.transform(1,0,-0.4,1,0,0)}p.lineWidth=w;p.scale(1/v,-1/v);p.translate(-this.x,-this.y);this.x+=o*(s.horizAdvX||r.horizAdvX)/r.fontFace.unitsPerEm;if(typeof(c[t])!="undefined"&&!isNaN(c[t])){this.x+=c[t]}}return}if(p.strokeStyle!=""){p.strokeText(a.compressSpaces(this.getText()),this.x,this.y)}if(p.fillStyle!=""){p.fillText(a.compressSpaces(this.getText()),this.x,this.y)}};this.getText=function(){};this.measureText=function(p){var r=this.parent.style("font-family").Definition.getDefinition();if(r!=null){var o=this.parent.style("font-size").numValueOrDefault(a.Font.Parse(a.ctx.font).fontSize);var v=0;var q=this.getText();if(r.isRTL){q=q.split("").reverse().join("")}var c=a.ToNumberArray(this.parent.attribute("dx").value);for(var t=0;t<q.length;t++){var s=this.getGlyph(r,q,t);v+=(s.horizAdvX||r.horizAdvX)*o/r.fontFace.unitsPerEm;if(typeof(c[t])!="undefined"&&!isNaN(c[t])){v+=c[t]}}return v}var w=a.compressSpaces(this.getText());if(!p.measureText){return w.length*10}p.save();this.setContext(p);var u=p.measureText(w).width;p.restore();return u}};a.Element.TextElementBase.prototype=new a.Element.RenderedElementBase;a.Element.tspan=function(d){this.base=a.Element.TextElementBase;this.base(d);this.text=d.nodeType==3?d.nodeValue:d.childNodes.length>0?d.childNodes[0].nodeValue:d.text;this.getText=function(){return this.text}};a.Element.tspan.prototype=new a.Element.TextElementBase;a.Element.tref=function(d){this.base=a.Element.TextElementBase;this.base(d);this.getText=function(){var c=this.attribute("xlink:href").Definition.getDefinition();if(c!=null){return c.children[0].getText()}}};a.Element.tref.prototype=new a.Element.TextElementBase;a.Element.a=function(e){this.base=a.Element.TextElementBase;this.base(e);this.hasText=true;for(var f=0;f<e.childNodes.length;f++){if(e.childNodes[f].nodeType!=3){this.hasText=false}}this.text=this.hasText?e.childNodes[0].nodeValue:"";this.getText=function(){return this.text};this.baseRenderChildren=this.renderChildren;this.renderChildren=function(g){if(this.hasText){this.baseRenderChildren(g);var c=new a.Property("fontSize",a.Font.Parse(a.ctx.font).fontSize);a.Mouse.checkBoundingBox(this,new a.BoundingBox(this.x,this.y-c.Length.toPixels("y"),this.x+this.measureText(g),this.y))}else{var d=new a.Element.g();d.children=this.children;d.parent=this;d.render(g)}};this.onclick=function(){window.open(this.attribute("xlink:href").value)};this.onmousemove=function(){a.ctx.canvas.style.cursor="pointer"}};a.Element.a.prototype=new a.Element.TextElementBase;a.Element.image=function(e){this.base=a.Element.RenderedElementBase;this.base(e);a.Images.push(this);this.img=document.createElement("img");this.loaded=false;var f=this;this.img.onload=function(){f.loaded=true};this.img.src=this.attribute("xlink:href").value;this.renderChildren=function(k){var l=this.attribute("x").Length.toPixels("x");var c=this.attribute("y").Length.toPixels("y");var d=this.attribute("width").Length.toPixels("x");var m=this.attribute("height").Length.toPixels("y");if(d==0||m==0){return}k.save();k.translate(l,c);a.AspectRatio(k,this.attribute("preserveAspectRatio").value,d,this.img.width,m,this.img.height,0,0);k.drawImage(this.img,0,0);k.restore()}};a.Element.image.prototype=new a.Element.RenderedElementBase;a.Element.g=function(d){this.base=a.Element.RenderedElementBase;this.base(d);this.getBoundingBox=function(){var c=new a.BoundingBox();for(var f=0;f<this.children.length;f++){c.addBoundingBox(this.children[f].getBoundingBox())}return c}};a.Element.g.prototype=new a.Element.RenderedElementBase;a.Element.symbol=function(d){this.base=a.Element.RenderedElementBase;this.base(d);this.baseSetContext=this.setContext;this.setContext=function(j){this.baseSetContext(j);if(this.attribute("viewBox").hasValue()){var h=a.ToNumberArray(this.attribute("viewBox").value);var k=h[0];var c=h[1];width=h[2];height=h[3];a.AspectRatio(j,this.attribute("preserveAspectRatio").value,this.attribute("width").Length.toPixels("x"),width,this.attribute("height").Length.toPixels("y"),height,k,c);a.ViewPort.SetCurrent(h[2],h[3])}}};a.Element.symbol.prototype=new a.Element.RenderedElementBase;a.Element.style=function(s){this.base=a.Element.ElementBase;this.base(s);var L=s.childNodes[0].nodeValue+(s.childNodes.length>1?s.childNodes[1].nodeValue:"");L=L.replace(/(\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"");L=a.compressSpaces(L);var N=L.split("}");for(var f=0;f<N.length;f++){if(a.trim(N[f])!=""){var J=N[f].split("{");var V=J[0].split(",");var Y=J[1].split(";");for(var j=0;j<V.length;j++){var Q=a.trim(V[j]);if(Q!=""){var W={};for(var k=0;k<Y.length;k++){var X=Y[k].indexOf(":");var H=Y[k].substr(0,X);var F=Y[k].substr(X+1,Y[k].length-X);if(H!=null&&F!=null){W[a.trim(H)]=new a.Property(a.trim(H),a.trim(F))}}a.Styles[Q]=W;if(Q=="@font-face"){var M=W["font-family"].value.replace(/"/g,"");var P=W.src.value.split(",");for(var I=0;I<P.length;I++){if(P[I].indexOf('format("svg")')>0){var S=P[I].indexOf("url");var T=P[I].indexOf(")",S);var U=P[I].substr(S+5,T-S-6);var K=a.parseXml(a.ajax(U));var R=K.getElementsByTagName("font");for(var O=0;O<R.length;O++){var G=a.CreateElement(R[O]);a.Definitions[M]=G}}}}}}}}};a.Element.style.prototype=new a.Element.ElementBase;a.Element.use=function(d){this.base=a.Element.RenderedElementBase;this.base(d);this.baseSetContext=this.setContext;this.setContext=function(c){this.baseSetContext(c);if(this.attribute("x").hasValue()){c.translate(this.attribute("x").Length.toPixels("x"),0)}if(this.attribute("y").hasValue()){c.translate(0,this.attribute("y").Length.toPixels("y"))}};this.getDefinition=function(){var c=this.attribute("xlink:href").Definition.getDefinition();if(this.attribute("width").hasValue()){c.attribute("width",true).value=this.attribute("width").value}if(this.attribute("height").hasValue()){c.attribute("height",true).value=this.attribute("height").value}return c};this.path=function(f){var c=this.getDefinition();if(c!=null){c.path(f)}};this.renderChildren=function(f){var c=this.getDefinition();if(c!=null){c.render(f)}}};a.Element.use.prototype=new a.Element.RenderedElementBase;a.Element.mask=function(d){this.base=a.Element.ElementBase;this.base(d);this.apply=function(q,w){var s=this.attribute("x").Length.toPixels("x");var u=this.attribute("y").Length.toPixels("y");var y=this.attribute("width").Length.toPixels("x");var r=this.attribute("height").Length.toPixels("y");var c=w.attribute("mask").value;w.attribute("mask").value="";var t=document.createElement("canvas");t.width=s+y;t.height=u+r;var p=t.getContext("2d");this.renderChildren(p);var v=document.createElement("canvas");v.width=s+y;v.height=u+r;var x=v.getContext("2d");w.render(x);x.globalCompositeOperation="destination-in";x.fillStyle=p.createPattern(t,"no-repeat");x.fillRect(0,0,s+y,u+r);q.fillStyle=x.createPattern(v,"no-repeat");q.fillRect(0,0,s+y,u+r);w.attribute("mask").value=c};this.render=function(c){}};a.Element.mask.prototype=new a.Element.ElementBase;a.Element.clipPath=function(d){this.base=a.Element.ElementBase;this.base(d);this.apply=function(f){for(var c=0;c<this.children.length;c++){if(this.children[c].path){this.children[c].path(f);f.clip()}}};this.render=function(c){}};a.Element.clipPath.prototype=new a.Element.ElementBase;a.Element.filter=function(d){this.base=a.Element.ElementBase;this.base(d);this.apply=function(c,A){var z=A.getBoundingBox();var v=this.attribute("x").Length.toPixels("x");var x=this.attribute("y").Length.toPixels("y");if(v==0||x==0){v=z.x1;x=z.y1}var E=this.attribute("width").Length.toPixels("x");var s=this.attribute("height").Length.toPixels("y");if(E==0||s==0){E=z.width();s=z.height()}var D=A.style("filter").value;A.style("filter").value="";var t=0.2;var u=t*E;var w=t*s;var y=document.createElement("canvas");y.width=E+2*u;y.height=s+2*w;var C=y.getContext("2d");C.translate(-v+u,-x+w);A.render(C);for(var B=0;B<this.children.length;B++){this.children[B].apply(C,0,0,E+2*u,s+2*w)}c.drawImage(y,0,0,E+2*u,s+2*w,v-u,x-w,E+2*u,s+2*w);A.style("filter",true).value=D};this.render=function(c){}};a.Element.filter.prototype=new a.Element.ElementBase;a.Element.feGaussianBlur=function(m){this.base=a.Element.ElementBase;this.base(m);function k(c){c=Math.max(c,0.01);var e=Math.ceil(c*4)+1;mask=[];for(var d=0;d<e;d++){mask[d]=Math.exp(-0.5*(d/c)*(d/c))}return mask}function p(e){var c=0;for(var d=1;d<e.length;d++){c+=Math.abs(e[d])}c=2*c+Math.abs(e[0]);for(var d=0;d<e.length;d++){e[d]/=c}return e}function n(x,c,y,g,z){for(var C=0;C<z;C++){for(var A=0;A<g;A++){var B=o(x,A,C,g,z,3)/255;for(var f=0;f<4;f++){var d=y[0]*(B==0?255:o(x,A,C,g,z,f))*(B==0||f==3?1:B);for(var e=1;e<y.length;e++){var h=o(x,Math.max(A-e,0),C,g,z,3)/255;var j=o(x,Math.min(A+e,g-1),C,g,z,3)/255;d+=y[e]*((h==0?255:o(x,Math.max(A-e,0),C,g,z,f))*(h==0||f==3?1:h)+(j==0?255:o(x,Math.min(A+e,g-1),C,g,z,f))*(j==0||f==3?1:j))}q(c,C,A,z,g,f,d)}}}}function o(c,d,f,g,e,h){return c[f*g*4+d*4+h]}function q(c,d,f,h,e,j,g){c[f*h*4+d*4+j]=g}function l(c,h,e,g){var f=c.getImageData(0,0,h,e);var d=k(g);d=p(d);tmp=[];n(f.data,tmp,d,h,e);n(tmp,f.data,d,e,h);c.clearRect(0,0,h,e);c.putImageData(f,0,0)}this.apply=function(c,d,f,g,e){l(c,g,e,this.attribute("stdDeviation").numValue())}};a.Element.filter.prototype=new a.Element.feGaussianBlur;a.Element.title=function(d){};a.Element.title.prototype=new a.Element.ElementBase;a.Element.desc=function(d){};a.Element.desc.prototype=new a.Element.ElementBase;a.Element.MISSING=function(d){console.log("ERROR: Element '"+d.nodeName+"' not yet implemented.")};a.Element.MISSING.prototype=new a.Element.ElementBase;a.CreateElement=function(g){var h=g.nodeName.replace(/^[^:]+:/,"");h=h.replace(/\-/g,"");var e=null;if(typeof(a.Element[h])!="undefined"){e=new a.Element[h](g)}else{e=new a.Element.MISSING(g)}e.type=g.nodeName;return e};a.load=function(f,e){a.loadXml(f,a.ajax(e))};a.loadXml=function(f,e){a.loadXmlDoc(f,a.parseXml(e))};a.loadXmlDoc=function(n,e){a.init(n);var o=function(c){var d=n.canvas;while(d){c.x-=d.offsetLeft;c.y-=d.offsetTop;d=d.offsetParent}if(window.scrollX){c.x+=window.scrollX}if(window.scrollY){c.y+=window.scrollY}return c};if(a.opts.ignoreMouse!=true){n.canvas.onclick=function(c){var d=o(new a.Point(c!=null?c.clientX:event.clientX,c!=null?c.clientY:event.clientY));a.Mouse.onclick(d.x,d.y)};n.canvas.onmousemove=function(c){var d=o(new a.Point(c!=null?c.clientX:event.clientX,c!=null?c.clientY:event.clientY));a.Mouse.onmousemove(d.x,d.y)}}var l=a.CreateElement(e.documentElement);l.root=true;var m=true;var p=function(){a.ViewPort.Clear();if(n.canvas.parentNode){a.ViewPort.SetCurrent(n.canvas.parentNode.clientWidth,n.canvas.parentNode.clientHeight)}if(a.opts.ignoreDimensions!=true){if(l.style("width").hasValue()){n.canvas.width=l.style("width").Length.toPixels("x");n.canvas.style.width=n.canvas.width+"px"}if(l.style("height").hasValue()){n.canvas.height=l.style("height").Length.toPixels("y");n.canvas.style.height=n.canvas.height+"px"}}var c=n.canvas.clientWidth||n.canvas.width;var d=n.canvas.clientHeight||n.canvas.height;a.ViewPort.SetCurrent(c,d);if(a.opts!=null&&a.opts.offsetX!=null){l.attribute("x",true).value=a.opts.offsetX}if(a.opts!=null&&a.opts.offsetY!=null){l.attribute("y",true).value=a.opts.offsetY}if(a.opts!=null&&a.opts.scaleWidth!=null&&a.opts.scaleHeight!=null){var g=1,f=1;if(l.attribute("width").hasValue()){g=l.attribute("width").Length.toPixels("x")/a.opts.scaleWidth}if(l.attribute("height").hasValue()){f=l.attribute("height").Length.toPixels("y")/a.opts.scaleHeight}l.attribute("width",true).value=a.opts.scaleWidth;l.attribute("height",true).value=a.opts.scaleHeight;l.attribute("viewBox",true).value="0 0 "+(c*g)+" "+(d*f);l.attribute("preserveAspectRatio",true).value="none"}if(a.opts.ignoreClear!=true){n.clearRect(0,0,c,d)}l.render(n);if(m){m=false;if(a.opts!=null&&typeof(a.opts.renderCallback)=="function"){a.opts.renderCallback()}}};var q=true;if(a.ImagesLoaded()){q=false;p()}a.intervalID=setInterval(function(){var c=false;if(q&&a.ImagesLoaded()){q=false;c=true}if(a.opts.ignoreMouse!=true){c=c|a.Mouse.hasEvents()}if(a.opts.ignoreAnimation!=true){for(var d=0;d<a.Animations.length;d++){c=c|a.Animations[d].update(1000/a.FRAMERATE)}}if(a.opts!=null&&typeof(a.opts.forceRedraw)=="function"){if(a.opts.forceRedraw()==true){c=true}}if(c){p();a.Mouse.runEvents()}},1000/a.FRAMERATE)};a.stop=function(){if(a.intervalID){clearInterval(a.intervalID)}};a.Mouse=new (function(){this.events=[];this.hasEvents=function(){return this.events.length!=0};this.onclick=function(f,e){this.events.push({type:"onclick",x:f,y:e,run:function(c){if(c.onclick){c.onclick()}}})};this.onmousemove=function(f,e){this.events.push({type:"onmousemove",x:f,y:e,run:function(c){if(c.onmousemove){c.onmousemove()}}})};this.eventElements=[];this.checkPath=function(h,k){for(var j=0;j<this.events.length;j++){var e=this.events[j];if(k.isPointInPath&&k.isPointInPath(e.x,e.y)){this.eventElements[j]=h}}};this.checkBoundingBox=function(j,e){for(var k=0;k<this.events.length;k++){var h=this.events[k];if(e.isPointInBox(h.x,h.y)){this.eventElements[k]=j}}};this.runEvents=function(){a.ctx.canvas.style.cursor="";for(var g=0;g<this.events.length;g++){var e=this.events[g];var h=this.eventElements[g];while(h){e.run(h);h=h.parent}}this.events=[];this.eventElements=[]}});return a}})();if(CanvasRenderingContext2D){CanvasRenderingContext2D.prototype.drawSvg=function(j,f,g,k,h){canvg(this.canvas,j,{ignoreMouse:true,ignoreAnimation:true,ignoreDimensions:true,ignoreClear:true,offsetX:f,offsetY:g,scaleWidth:k,scaleHeight:h})}}(function(C){var x,v="div",F="absolute",z="relative",E="hidden",u="visible",B="px",y=C.css,G=C.CanVGRenderer,r=C.SVGRenderer,w=C.extend,s=C.merge,A=C.addEvent,D=C.createElement,t=C.discardElement;w(G.prototype,r.prototype);w(G.prototype,{create:function(a,d,b,c){this.setContainer(d,b,c);this.configure(a)},setContainer:function(m,f,j){var d=m.style,c=m.parentNode,h=d.left,g=d.top,b=m.offsetWidth,a=m.offsetHeight,k,e={visibility:E,position:F};this.init.apply(this,[m,f,j]);k=D("canvas",{width:b,height:a},{position:z,left:h,top:g},m);this.canvas=k;this.ttLine=D(v,null,e,c);this.ttDiv=D(v,null,e,c);this.ttTimer=x;var l=D(v,{width:b,height:a},{visibility:E,left:h,top:g},c);this.hiddenSvg=l;l.appendChild(this.box)},configure:function(d){var a=this,e=d.options.tooltip,f=e.borderWidth,b=a.ttDiv,c=e.style,g=a.ttLine,h=parseInt(c.padding,10);c=s(c,{padding:h+B,"background-color":e.backgroundColor,"border-style":"solid","border-width":f+B,"border-radius":e.borderRadius+B});if(e.shadow){c=s(c,{"box-shadow":"1px 1px 3px gray","-webkit-box-shadow":"1px 1px 3px gray"})}y(b,c);y(g,{"border-left":"1px solid darkgray"});A(d,"tooltipRefresh",function(n){var j=d.container,k=j.offsetLeft,m=j.offsetTop,l;b.innerHTML=n.text;l=d.tooltip.getPosition(b.offsetWidth,b.offsetHeight,{plotX:n.x,plotY:n.y});y(b,{visibility:u,left:l.x+B,top:l.y+B,"border-color":n.borderColor});y(g,{visibility:u,left:k+n.x+B,top:m+d.plotTop+B,height:d.plotHeight+B});if(a.ttTimer!==x){clearTimeout(a.ttTimer)}a.ttTimer=setTimeout(function(){y(b,{visibility:E});y(g,{visibility:E})},3000)})},destroy:function(){var a=this;t(a.canvas);if(a.ttTimer!==x){clearTimeout(a.ttTimer)}t(a.ttLine);t(a.ttDiv);t(a.hiddenSvg);return r.prototype.destroy.apply(a)},color:function(c,b,a){if(c&&c.linearGradient){c=c.stops[c.stops.length-1][1]}return r.prototype.color.call(this,c,b,a)},draw:function(){var a=this;window.canvg(a.canvas,a.hiddenSvg.innerHTML)}})}(Highcharts));