/*!
 * jQuery UI Sortable 1.8.21
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Sortables
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
(function(d,c){d.widget("ui.sortable",d.ui.mouse,{widgetEventPrefix:"sort",ready:false,options:{appendTo:"parent",axis:false,connectWith:false,containment:false,cursor:"auto",cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",items:"> *",opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1000},_create:function(){var a=this.options;this.containerCache={};this.element.addClass("ui-sortable");this.refresh();this.floating=this.items.length?a.axis==="x"||(/left|right/).test(this.items[0].item.css("float"))||(/inline|table-cell/).test(this.items[0].item.css("display")):false;this.offset=this.element.offset();this._mouseInit();this.ready=true},destroy:function(){d.Widget.prototype.destroy.call(this);this.element.removeClass("ui-sortable ui-sortable-disabled");this._mouseDestroy();for(var a=this.items.length-1;a>=0;a--){this.items[a].item.removeData(this.widgetName+"-item")}return this},_setOption:function(b,a){if(b==="disabled"){this.options[b]=a;this.widget()[a?"addClass":"removeClass"]("ui-sortable-disabled")}else{d.Widget.prototype._setOption.apply(this,arguments)}},_mouseCapture:function(j,b){var k=this;if(this.reverting){return false}if(this.options.disabled||this.options.type=="static"){return false}this._refreshItems(j);var l=null,m=this,n=d(j.target).parents().each(function(){if(d.data(this,k.widgetName+"-item")==m){l=d(this);return false}});if(d.data(j.target,k.widgetName+"-item")==m){l=d(j.target)}if(!l){return false}if(this.options.handle&&!b){var a=false;d(this.options.handle,l).find("*").andSelf().each(function(){if(this==j.target){a=true}});if(!a){return false}}this.currentItem=l;this._removeCurrentsFromItems();return true},_mouseStart:function(i,b,l){var a=this.options,k=this;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(i);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};d.extend(this.offset,{click:{left:i.pageX-this.offset.left,top:i.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");this.originalPosition=this._generatePosition(i);this.originalPageX=i.pageX;this.originalPageY=i.pageY;(a.cursorAt&&this._adjustOffsetFromHelper(a.cursorAt));this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};if(this.helper[0]!=this.currentItem[0]){this.currentItem.hide()}this._createPlaceholder();if(a.containment){this._setContainment()}if(a.cursor){if(d("body").css("cursor")){this._storedCursor=d("body").css("cursor")}d("body").css("cursor",a.cursor)}if(a.opacity){if(this.helper.css("opacity")){this._storedOpacity=this.helper.css("opacity")}this.helper.css("opacity",a.opacity)}if(a.zIndex){if(this.helper.css("zIndex")){this._storedZIndex=this.helper.css("zIndex")}this.helper.css("zIndex",a.zIndex)}if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"){this.overflowOffset=this.scrollParent.offset()}this._trigger("start",i,this._uiHash());if(!this._preserveHelperProportions){this._cacheHelperProportions()}if(!l){for(var j=this.containers.length-1;j>=0;j--){this.containers[j]._trigger("activate",i,k._uiHash(this))}}if(d.ui.ddmanager){d.ui.ddmanager.current=this}if(d.ui.ddmanager&&!a.dropBehaviour){d.ui.ddmanager.prepareOffsets(this,i)}this.dragging=true;this.helper.addClass("ui-sortable-helper");this._mouseDrag(i);return true},_mouseDrag:function(i){this.position=this._generatePosition(i);this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs){this.lastPositionAbs=this.positionAbs}if(this.options.scroll){var b=this.options,n=false;if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"){if((this.overflowOffset.top+this.scrollParent[0].offsetHeight)-i.pageY<b.scrollSensitivity){this.scrollParent[0].scrollTop=n=this.scrollParent[0].scrollTop+b.scrollSpeed}else{if(i.pageY-this.overflowOffset.top<b.scrollSensitivity){this.scrollParent[0].scrollTop=n=this.scrollParent[0].scrollTop-b.scrollSpeed}}if((this.overflowOffset.left+this.scrollParent[0].offsetWidth)-i.pageX<b.scrollSensitivity){this.scrollParent[0].scrollLeft=n=this.scrollParent[0].scrollLeft+b.scrollSpeed}else{if(i.pageX-this.overflowOffset.left<b.scrollSensitivity){this.scrollParent[0].scrollLeft=n=this.scrollParent[0].scrollLeft-b.scrollSpeed}}}else{if(i.pageY-d(document).scrollTop()<b.scrollSensitivity){n=d(document).scrollTop(d(document).scrollTop()-b.scrollSpeed)}else{if(d(window).height()-(i.pageY-d(document).scrollTop())<b.scrollSensitivity){n=d(document).scrollTop(d(document).scrollTop()+b.scrollSpeed)}}if(i.pageX-d(document).scrollLeft()<b.scrollSensitivity){n=d(document).scrollLeft(d(document).scrollLeft()-b.scrollSpeed)}else{if(d(window).width()-(i.pageX-d(document).scrollLeft())<b.scrollSensitivity){n=d(document).scrollLeft(d(document).scrollLeft()+b.scrollSpeed)}}}if(n!==false&&d.ui.ddmanager&&!b.dropBehaviour){d.ui.ddmanager.prepareOffsets(this,i)}}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!="x"){this.helper[0].style.top=this.position.top+"px"}for(var l=this.items.length-1;l>=0;l--){var k=this.items[l],m=k.item[0],a=this._intersectsWithPointer(k);if(!a){continue}if(m!=this.currentItem[0]&&this.placeholder[a==1?"next":"prev"]()[0]!=m&&!d.ui.contains(this.placeholder[0],m)&&(this.options.type=="semi-dynamic"?!d.ui.contains(this.element[0],m):true)){this.direction=a==1?"down":"up";if(this.options.tolerance=="pointer"||this._intersectsWithSides(k)){this._rearrange(i,k)}else{break}this._trigger("change",i,this._uiHash());break}}this._contactContainers(i);if(d.ui.ddmanager){d.ui.ddmanager.drag(this,i)}this._trigger("sort",i,this._uiHash());this.lastPositionAbs=this.positionAbs;return false},_mouseStop:function(g,b){if(!g){return}if(d.ui.ddmanager&&!this.options.dropBehaviour){d.ui.ddmanager.drop(this,g)}if(this.options.revert){var h=this;var a=h.placeholder.offset();h.reverting=true;d(this.helper).animate({left:a.left-this.offset.parent.left-h.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:a.top-this.offset.parent.top-h.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){h._clear(g)})}else{this._clear(g,b)}return false},cancel:function(){var b=this;if(this.dragging){this._mouseUp({target:null});if(this.options.helper=="original"){this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else{this.currentItem.show()}for(var a=this.containers.length-1;a>=0;a--){this.containers[a]._trigger("deactivate",null,b._uiHash(this));if(this.containers[a].containerCache.over){this.containers[a]._trigger("out",null,b._uiHash(this));this.containers[a].containerCache.over=0}}}if(this.placeholder){if(this.placeholder[0].parentNode){this.placeholder[0].parentNode.removeChild(this.placeholder[0])}if(this.options.helper!="original"&&this.helper&&this.helper[0].parentNode){this.helper.remove()}d.extend(this,{helper:null,dragging:false,reverting:false,_noFinalSort:null});if(this.domPosition.prev){d(this.domPosition.prev).after(this.currentItem)}else{d(this.domPosition.parent).prepend(this.currentItem)}}return this},serialize:function(a){var f=this._getItemsAsjQuery(a&&a.connected);var b=[];a=a||{};d(f).each(function(){var e=(d(a.item||this).attr(a.attribute||"id")||"").match(a.expression||(/(.+)[-=_](.+)/));if(e){b.push((a.key||e[1]+"[]")+"="+(a.key&&a.expression?e[1]:e[2]))}});if(!b.length&&a.key){b.push(a.key+"=")}return b.join("&")},toArray:function(a){var f=this._getItemsAsjQuery(a&&a.connected);var b=[];a=a||{};f.each(function(){b.push(d(a.item||this).attr(a.attribute||"id")||"")});return b},_intersectsWith:function(l){var v=this.positionAbs.left,w=v+this.helperProportions.width,p=this.positionAbs.top,q=p+this.helperProportions.height;var u=l.left,x=u+l.width,b=l.top,r=b+l.height;var a=this.offset.click.top,s=this.offset.click.left;var t=(p+a)>b&&(p+a)<r&&(v+s)>u&&(v+s)<x;if(this.options.tolerance=="pointer"||this.options.forcePointerForContainers||(this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>l[this.floating?"width":"height"])){return t}else{return(u<v+(this.helperProportions.width/2)&&w-(this.helperProportions.width/2)<x&&b<p+(this.helperProportions.height/2)&&q-(this.helperProportions.height/2)<r)}},_intersectsWithPointer:function(j){var i=(this.options.axis==="x")||d.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,j.top,j.height),k=(this.options.axis==="y")||d.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,j.left,j.width),a=i&&k,l=this._getDragVerticalDirection(),b=this._getDragHorizontalDirection();if(!a){return false}return this.floating?(((b&&b=="right")||l=="down")?2:1):(l&&(l=="down"?2:1))},_intersectsWithSides:function(b){var i=d.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top+(b.height/2),b.height),h=d.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left+(b.width/2),b.width),j=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection();if(this.floating&&a){return((a=="right"&&h)||(a=="left"&&!h))}else{return j&&((j=="down"&&i)||(j=="up"&&!i))}},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return a!=0&&(a>0?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return a!=0&&(a>0?"right":"left")},refresh:function(a){this._refreshItems(a);this.refreshPositions();return this},_connectWith:function(){var a=this.options;return a.connectWith.constructor==String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(r){var a=this;var j=[];var o=[];var i=this._connectWith();if(i&&r){for(var p=i.length-1;p>=0;p--){var b=d(i[p]);for(var q=b.length-1;q>=0;q--){var n=d.data(b[q],this.widgetName);if(n&&n!=this&&!n.options.disabled){o.push([d.isFunction(n.options.items)?n.options.items.call(n.element):d(n.options.items,n.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),n])}}}}o.push([d.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):d(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var p=o.length-1;p>=0;p--){o[p][0].each(function(){j.push(this)})}return d(j)},_removeCurrentsFromItems:function(){var a=this.currentItem.find(":data("+this.widgetName+"-item)");for(var b=0;b<this.items.length;b++){for(var f=0;f<a.length;f++){if(a[f]==this.items[b].item[0]){this.items.splice(b,1)}}}},_refreshItems:function(z){this.items=[];this.containers=[this];var t=this.items;var a=this;var v=[[d.isFunction(this.options.items)?this.options.items.call(this.element[0],z,{item:this.currentItem}):d(this.options.items,this.element),this]];var r=this._connectWith();if(r&&this.ready){for(var w=r.length-1;w>=0;w--){var j=d(r[w]);for(var x=j.length-1;x>=0;x--){var u=d.data(j[x],this.widgetName);if(u&&u!=this&&!u.options.disabled){v.push([d.isFunction(u.options.items)?u.options.items.call(u.element[0],z,{item:this.currentItem}):d(u.options.items,u.element),u]);this.containers.push(u)}}}}for(var w=v.length-1;w>=0;w--){var s=v[w][1];var y=v[w][0];for(var x=0,i=y.length;x<i;x++){var b=d(y[x]);b.data(this.widgetName+"-item",s);t.push({item:b,instance:s,width:0,height:0,left:0,top:0})}}},refreshPositions:function(j){if(this.offsetParent&&this.helper){this.offset.parent=this._getParentOffset()}for(var h=this.items.length-1;h>=0;h--){var b=this.items[h];if(b.instance!=this.currentContainer&&this.currentContainer&&b.item[0]!=this.currentItem[0]){continue}var i=this.options.toleranceElement?d(this.options.toleranceElement,b.item):b.item;if(!j){b.width=i.outerWidth();b.height=i.outerHeight()}var a=i.offset();b.left=a.left;b.top=a.top}if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this)}else{for(var h=this.containers.length-1;h>=0;h--){var a=this.containers[h].element.offset();this.containers[h].containerCache.left=a.left;this.containers[h].containerCache.top=a.top;this.containers[h].containerCache.width=this.containers[h].element.outerWidth();this.containers[h].containerCache.height=this.containers[h].element.outerHeight()}}return this},_createPlaceholder:function(b){var h=b||this,a=h.options;if(!a.placeholder||a.placeholder.constructor==String){var g=a.placeholder;a.placeholder={element:function(){var e=d(document.createElement(h.currentItem[0].nodeName)).addClass(g||h.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];if(!g){e.style.visibility="hidden"}return e},update:function(f,e){if(g&&!a.forcePlaceholderSize){return}if(!e.height()){e.height(h.currentItem.innerHeight()-parseInt(h.currentItem.css("paddingTop")||0,10)-parseInt(h.currentItem.css("paddingBottom")||0,10))}if(!e.width()){e.width(h.currentItem.innerWidth()-parseInt(h.currentItem.css("paddingLeft")||0,10)-parseInt(h.currentItem.css("paddingRight")||0,10))}}}}h.placeholder=d(a.placeholder.element.call(h.element,h.currentItem));h.currentItem.after(h.placeholder);a.placeholder.update(h,h.placeholder)},_contactContainers:function(r){var p=null,b=null;for(var n=this.containers.length-1;n>=0;n--){if(d.ui.contains(this.currentItem[0],this.containers[n].element[0])){continue}if(this._intersectsWith(this.containers[n].containerCache)){if(p&&d.ui.contains(this.containers[n].element[0],p.element[0])){continue}p=this.containers[n];b=n}else{if(this.containers[n].containerCache.over){this.containers[n]._trigger("out",r,this._uiHash(this));this.containers[n].containerCache.over=0}}}if(!p){return}if(this.containers.length===1){this.containers[b]._trigger("over",r,this._uiHash(this));this.containers[b].containerCache.over=1}else{if(this.currentContainer!=this.containers[b]){var i=10000;var j=null;var q=this.positionAbs[this.containers[b].floating?"left":"top"];for(var o=this.items.length-1;o>=0;o--){if(!d.ui.contains(this.containers[b].element[0],this.items[o].item[0])){continue}var a=this.containers[b].floating?this.items[o].item.offset().left:this.items[o].item.offset().top;if(Math.abs(a-q)<i){i=Math.abs(a-q);j=this.items[o];this.direction=(a-q>0)?"down":"up"}}if(!j&&!this.options.dropOnEmpty){return}this.currentContainer=this.containers[b];j?this._rearrange(r,j,null,true):this._rearrange(r,null,this.containers[b].element,true);this._trigger("change",r,this._uiHash());this.containers[b]._trigger("change",r,this._uiHash(this));this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[b]._trigger("over",r,this._uiHash(this));this.containers[b].containerCache.over=1}}},_createHelper:function(b){var a=this.options;var f=d.isFunction(a.helper)?d(a.helper.apply(this.element[0],[b,this.currentItem])):(a.helper=="clone"?this.currentItem.clone():this.currentItem);if(!f.parents("body").length){d(a.appendTo!="parent"?a.appendTo:this.currentItem[0].parentNode)[0].appendChild(f[0])}if(f[0]==this.currentItem[0]){this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}}if(f[0].style.width==""||a.forceHelperSize){f.width(this.currentItem.width())}if(f[0].style.height==""||a.forceHelperSize){f.height(this.currentItem.height())}return f},_adjustOffsetFromHelper:function(a){if(typeof a=="string"){a=a.split(" ")}if(d.isArray(a)){a={left:+a[0],top:+a[1]||0}}if("left" in a){this.offset.click.left=a.left+this.margins.left}if("right" in a){this.offset.click.left=this.helperProportions.width-a.right+this.margins.left}if("top" in a){this.offset.click.top=a.top+this.margins.top}if("bottom" in a){this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var a=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],this.offsetParent[0])){a.left+=this.scrollParent.scrollLeft();a.top+=this.scrollParent.scrollTop()}if((this.offsetParent[0]==document.body)||(this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&d.browser.msie)){a={top:0,left:0}}return{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else{return{top:0,left:0}}},_cacheMargins:function(){this.margins={left:(parseInt(this.currentItem.css("marginLeft"),10)||0),top:(parseInt(this.currentItem.css("marginTop"),10)||0)}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var a=this.options;if(a.containment=="parent"){a.containment=this.helper[0].parentNode}if(a.containment=="document"||a.containment=="window"){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,d(a.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(d(a.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!(/^(document|window|parent)$/).test(a.containment)){var g=d(a.containment)[0];var b=d(a.containment).offset();var h=(d(g).css("overflow")!="hidden");this.containment=[b.left+(parseInt(d(g).css("borderLeftWidth"),10)||0)+(parseInt(d(g).css("paddingLeft"),10)||0)-this.margins.left,b.top+(parseInt(d(g).css("borderTopWidth"),10)||0)+(parseInt(d(g).css("paddingTop"),10)||0)-this.margins.top,b.left+(h?Math.max(g.scrollWidth,g.offsetWidth):g.offsetWidth)-(parseInt(d(g).css("borderLeftWidth"),10)||0)-(parseInt(d(g).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,b.top+(h?Math.max(g.scrollHeight,g.offsetHeight):g.offsetHeight)-(parseInt(d(g).css("borderTopWidth"),10)||0)-(parseInt(d(g).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(j,a){if(!a){a=this.position}var l=j=="absolute"?1:-1;var k=this.options,m=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,b=(/(html|body)/i).test(m[0].tagName);return{top:(a.top+this.offset.relative.top*l+this.offset.parent.top*l-(d.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():(b?0:m.scrollTop()))*l)),left:(a.left+this.offset.relative.left*l+this.offset.parent.left*l-(d.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():b?0:m.scrollLeft())*l))}},_generatePosition:function(m){var b=this.options,p=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,a=(/(html|body)/i).test(p[0].tagName);if(this.cssPosition=="relative"&&!(this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0])){this.offset.relative=this._getRelativeOffset()}var n=m.pageX;var o=m.pageY;if(this.originalPosition){if(this.containment){if(m.pageX-this.offset.click.left<this.containment[0]){n=this.containment[0]+this.offset.click.left}if(m.pageY-this.offset.click.top<this.containment[1]){o=this.containment[1]+this.offset.click.top}if(m.pageX-this.offset.click.left>this.containment[2]){n=this.containment[2]+this.offset.click.left}if(m.pageY-this.offset.click.top>this.containment[3]){o=this.containment[3]+this.offset.click.top}}if(b.grid){var k=this.originalPageY+Math.round((o-this.originalPageY)/b.grid[1])*b.grid[1];o=this.containment?(!(k-this.offset.click.top<this.containment[1]||k-this.offset.click.top>this.containment[3])?k:(!(k-this.offset.click.top<this.containment[1])?k-b.grid[1]:k+b.grid[1])):k;var l=this.originalPageX+Math.round((n-this.originalPageX)/b.grid[0])*b.grid[0];n=this.containment?(!(l-this.offset.click.left<this.containment[0]||l-this.offset.click.left>this.containment[2])?l:(!(l-this.offset.click.left<this.containment[0])?l-b.grid[0]:l+b.grid[0])):l}}return{top:(o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(d.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():(a?0:p.scrollTop())))),left:(n-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(d.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():a?0:p.scrollLeft())))}},_rearrange:function(a,b,k,i){k?k[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],(this.direction=="down"?b.item[0]:b.item[0].nextSibling));this.counter=this.counter?++this.counter:1;var j=this,l=this.counter;window.setTimeout(function(){if(l==j.counter){j.refreshPositions(!i)}},0)},_clear:function(h,b){this.reverting=false;var a=[],j=this;if(!this._noFinalSort&&this.currentItem.parent().length){this.placeholder.before(this.currentItem)}this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var i in this._storedCSS){if(this._storedCSS[i]=="auto"||this._storedCSS[i]=="static"){this._storedCSS[i]=""}}this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else{this.currentItem.show()}if(this.fromOutside&&!b){a.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))})}if((this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!b){a.push(function(e){this._trigger("update",e,this._uiHash())})}if(!d.ui.contains(this.element[0],this.currentItem[0])){if(!b){a.push(function(e){this._trigger("remove",e,this._uiHash())})}for(var i=this.containers.length-1;i>=0;i--){if(d.ui.contains(this.containers[i].element[0],this.currentItem[0])&&!b){a.push((function(e){return function(f){e._trigger("receive",f,this._uiHash(this))}}).call(this,this.containers[i]));a.push((function(e){return function(f){e._trigger("update",f,this._uiHash(this))}}).call(this,this.containers[i]))}}}for(var i=this.containers.length-1;i>=0;i--){if(!b){a.push((function(e){return function(f){e._trigger("deactivate",f,this._uiHash(this))}}).call(this,this.containers[i]))}if(this.containers[i].containerCache.over){a.push((function(e){return function(f){e._trigger("out",f,this._uiHash(this))}}).call(this,this.containers[i]));this.containers[i].containerCache.over=0}}if(this._storedCursor){d("body").css("cursor",this._storedCursor)}if(this._storedOpacity){this.helper.css("opacity",this._storedOpacity)}if(this._storedZIndex){this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex)}this.dragging=false;if(this.cancelHelperRemoval){if(!b){this._trigger("beforeStop",h,this._uiHash());for(var i=0;i<a.length;i++){a[i].call(this,h)}this._trigger("stop",h,this._uiHash())}return false}if(!b){this._trigger("beforeStop",h,this._uiHash())}this.placeholder[0].parentNode.removeChild(this.placeholder[0]);if(this.helper[0]!=this.currentItem[0]){this.helper.remove()}this.helper=null;if(!b){for(var i=0;i<a.length;i++){a[i].call(this,h)}this._trigger("stop",h,this._uiHash())}this.fromOutside=false;return true},_trigger:function(){if(d.Widget.prototype._trigger.apply(this,arguments)===false){this.cancel()}},_uiHash:function(a){var b=a||this;return{helper:b.helper,placeholder:b.placeholder||d([]),position:b.position,originalPosition:b.originalPosition,offset:b.positionAbs,item:b.currentItem,sender:a?a.element:null}}});d.extend(d.ui.sortable,{version:"1.8.21"})})(jQuery);