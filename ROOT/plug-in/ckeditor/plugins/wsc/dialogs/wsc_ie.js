CKEDITOR.dialog.add("checkspell",function(i){function k(f,m){var n=0;return function(){"function"==typeof window.doSpell?("undefined"!=typeof a&&window.clearInterval(a),e(f)):180==n++&&window._cancelOnError(m)}}function e(m){var o=new window._SP_FCK_LangCompare,f=CKEDITOR.getUrl(i.plugins.wsc.path+"dialogs/"),n=f+"tmpFrameset.html";window.gFCKPluginName="wsc";o.setDefaulLangCode(i.config.defaultLanguage);window.doSpell({ctrl:b,lang:i.config.wsc_lang||o.getSPLangCode(i.langCode),intLang:i.config.wsc_uiLang||o.getSPLangCode(i.langCode),winType:l,onCancel:function(){m.hide()},onFinish:function(p){i.focus();m.getParentEditor().setData(p.value);m.hide()},staticFrame:n,framesetPath:n,iframePath:f+"ciframe.html",schemaURI:f+"wsc.css",userDictionaryName:i.config.wsc_userDictionaryName,customDictionaryName:i.config.wsc_customDictionaryIds&&i.config.wsc_customDictionaryIds.split(","),domainName:i.config.wsc_domainName});CKEDITOR.document.getById(c).setStyle("display","none");CKEDITOR.document.getById(l).setStyle("display","block")}var j=CKEDITOR.tools.getNextNumber(),l="cke_frame_"+j,b="cke_data_"+j,c="cke_error_"+j,a,j=document.location.protocol||"http:",d=i.lang.wsc.notAvailable,g='<textarea style="display: none" id="'+b+'" rows="10" cols="40"> </textarea><div id="'+c+'" style="display:none;color:red;font-size:16px;font-weight:bold;padding-top:160px;text-align:center;z-index:11;"></div><iframe src="" style="width:100%;background-color:#f1f1e3;" frameborder="0" name="'+l+'" id="'+l+'" allowtransparency="1"></iframe>',h=i.config.wsc_customLoaderScript||j+"//loader.webspellchecker.net/sproxy_fck/sproxy.php?plugin=fck2&customerid="+i.config.wsc_customerId+"&cmd=script&doc=wsc&schema=22";i.config.wsc_customLoaderScript&&(d+='<p style="color:#000;font-size:11px;font-weight: normal;text-align:center;padding-top:10px">'+i.lang.wsc.errorLoading.replace(/%s/g,i.config.wsc_customLoaderScript)+"</p>");window._cancelOnError=function(m){if("undefined"==typeof window.WSC_Error){CKEDITOR.document.getById(l).setStyle("display","none");var f=CKEDITOR.document.getById(c);f.setStyle("display","block");f.setHtml(m||i.lang.wsc.notAvailable)}};return{title:i.config.wsc_dialogTitle||i.lang.wsc.title,minWidth:485,minHeight:380,buttons:[CKEDITOR.dialog.cancelButton],onShow:function(){var f=this.getContentElement("general","content").getElement();f.setHtml(g);f.getChild(2).setStyle("height",this._.contentSize.height+"px");"function"!=typeof window.doSpell&&CKEDITOR.document.getHead().append(CKEDITOR.document.createElement("script",{attributes:{type:"text/javascript",src:h}}));f=i.getData();CKEDITOR.document.getById(b).setValue(f);a=window.setInterval(k(this,d),250)},onHide:function(){window.ooo=void 0;window.int_framsetLoaded=void 0;window.framesetLoaded=void 0;window.is_window_opened=!1},contents:[{id:"general",label:i.config.wsc_dialogTitle||i.lang.wsc.title,padding:0,elements:[{type:"html",id:"content",html:""}]}]}});CKEDITOR.dialog.on("resize",function(a){var a=a.data,c=a.dialog;"checkspell"==c._.name&&((c=(c=c.getContentElement("general","content").getElement())&&c.getChild(2))&&c.setSize("height",a.height),c&&c.setSize("width",a.width))});